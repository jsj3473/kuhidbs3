<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>조합정보조회</title>

    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script defer th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/datatables-custom.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/slimTable.css}">
    <script th:src="@{/js/common.js}"></script>
    <script defer th:src="@{/js/searchModal.js}"></script>

    <style></style>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("fundUpdateForm");

            // 숫자 입력 필드 자동 포맷 적용 (천단위 콤마, 음수 포함)
            function formatNumberInput(input) {
                input.addEventListener("input", function () {
                    let value = this.value.replace(/[^0-9.-]/g, ""); // 숫자, 마이너스, 점 제외 삭제
                    if (value !== "") {
                        this.value = Number(value).toLocaleString("en-US"); // 천 단위 콤마 추가
                    }
                });

                input.addEventListener("blur", function () {
                    let value = this.value.replace(/[^0-9.-]/g, "");
                    this.value = value !== "" ? Number(value).toLocaleString("en-US") : "";
                });
            }

            // 모든 금액 관련 필드에 적용
            const numberFields = document.querySelectorAll(".number-format");
            numberFields.forEach(formatNumberInput);
        });

        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("fundUpdateForm");

            form.addEventListener("submit", function (event) {
                event.preventDefault();

                // 콤마 제거 후 데이터 변환
                const numberFields = document.querySelectorAll(".number-format");
                numberFields.forEach(field => {
                    field.value = field.value.replace(/,/g, "");
                });

                // 폼 데이터 가져오기
                const formData = new FormData(form);
                const jsonData = Object.fromEntries(formData.entries());

                // 서버에 PUT 요청 보내기
                fetch("/api/funds/updateFund", {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(jsonData)
                })
                    .then(response => {
                        if (!response.ok) throw new Error("저장 실패");
                        return response.json();
                    })
                    .then(data => {
                        alert("펀드 정보가 성공적으로 저장되었습니다!");
                        location.reload(); // 페이지 새로고침
                    })
                    .catch(error => {
                        alert("저장 중 오류가 발생했습니다. " + error.message);
                    });
            });
        });

    </script>
    <script>

        document.addEventListener("DOMContentLoaded", function () {
            let numberInputs = document.querySelectorAll(".number-format");

            numberInputs.forEach(input => {
                input.addEventListener("input", function (event) {
                    let value = event.target.value.replace(/,/g, ""); // 콤마 제거
                    if (!isNaN(value) && value !== "") {
                        event.target.value = formatNumber(value);
                    }
                });
            });
        });

        /** 천 단위 콤마 추가하는 함수 */
        function formatNumber(value) {
            return Number(value).toLocaleString();
        }

        /** 천 단위 콤마를 제거하는 함수 */
        function removeComma(value) {
            return value.replace(/,/g, "");
        }

    </script>
    <script>
        function fetchFundInfo(fundId) {
            fetch(`/api/funds/info/${fundId}`)
                .then(response => response.json())
                .then(data => updateFundInfo(data))
                .catch(error => console.error("데이터 로드 실패:", error));
        }

        function updateFundInfo(data) {
            console.log("받아온 데이터:", data);

            // 데이터의 모든 요소를 개별적으로 출력
            Object.entries(data).forEach(([key, value]) => {
                console.log(`${key}:`, value);
            });
            document.getElementById("fundId").value = data.fundId || "";
            document.getElementById("liquidationStatus").value = data.liquidationStatus || "";
            document.getElementById("liquidationDate").value = data.liquidationDate || "";
            document.getElementById("fundName").value = data.fundName || "";
            document.getElementById("fundNameDetail").value = data.fundNameDetail || "";
            // document.getElementById("establishmentDate").value = data.establishmentDate || "";
            document.getElementById("duration").value = data.duration || "";
            document.getElementById("durationStartDate").value = data.durationStartDate || "";
            document.getElementById("durationEndDate").value = data.durationEndDate || "";
            document.getElementById("investmentDuration").value = data.investmentDuration || "";
            document.getElementById("investmentStartDate").value = data.investmentStartDate || "";
            document.getElementById("investmentEndDate").value = data.investmentEndDate || "";
            document.getElementById("committedTotalPrice").value = Number(data.committedTotalPrice).toLocaleString();
            document.getElementById("unitPrice").value = Number(data.unitPrice).toLocaleString();
            document.getElementById("fundOrganizationType").value = data.fundOrganizationType || "";
            document.getElementById("paymentType").value = data.paymentType || "";
            document.getElementById("leadFundManager").value = data.leadFundManager || "";
            document.getElementById("coreIvtManager").value = data.coreIvtManager || "";
            document.getElementById("auditorName").value = data.auditorName || "";
            document.getElementById("changeDate").value = data.changeDate || "";
            document.getElementById("trusteeCorporation").value = data.trusteeCorporation || "";
            document.getElementById("administrationCorporation").value = data.administrationCorporation || "";
            document.getElementById("targetReturnRate").value = data.targetReturnRate;
            document.getElementById("performanceFeeRate").value = data.performanceFeeRate;
            document.getElementById("managementFeeInvestmentPeriod").value = data.managementFeeInvestmentPeriod || "";
            document.getElementById("managementFeeManagementPeriod").value = data.managementFeeManagementPeriod || "";
            // document.getElementById("agreementCriteria").value = data.agreementCriteria || "";
            document.getElementById("incentiveCondition").value = data.incentiveCondition || "";
            // document.getElementById("priorLossGP").value = data.priorLossGP || "";
            // document.getElementById("priorLossLP").value = data.priorLossLP || "";

            updateFundMembersTable(data.fundMems);
            updateFundAchievementInfo(data.fundAchievement);
            //
            // document.getElementById("mandatoryPurpose").value = data.mandatoryPurpose || "";
            // document.getElementById("mainInvest1Purpose").value = data.mainInvest1Purpose || "";
            // document.getElementById("mainInvest2Purpose").value = data.mainInvest2Purpose || "";
            // document.getElementById("mainInvest3Purpose").value = data.mainInvest3Purpose || "";
            // document.getElementById("specialInvest1Purpose").value = data.specialInvest1Purpose || "";
            // document.getElementById("specialInvest2Purpose").value = data.specialInvest2Purpose || "";
            // document.getElementById("specialInvest3Purpose").value = data.specialInvest3Purpose || "";

            const setValueIfExists = (id, value) => {
                const el = document.getElementById(id);
                if (el) el.value = value || "";
            };

            // 안전하게 값 바인딩
            setValueIfExists("mandatoryPurpose", data.mandatoryPurpose);
            setValueIfExists("mainInvest1Purpose", data.mainInvest1Purpose);
            setValueIfExists("mainInvest2Purpose", data.mainInvest2Purpose);
            setValueIfExists("mainInvest3Purpose", data.mainInvest3Purpose);
            setValueIfExists("specialInvest1Purpose", data.specialInvest1Purpose);
            setValueIfExists("specialInvest2Purpose", data.specialInvest2Purpose);
            setValueIfExists("specialInvest3Purpose", data.specialInvest3Purpose);

        }
        function updateFundMembersTable(fundMems) {
            const tableBody = document.getElementById("fundMembersTable");
            tableBody.innerHTML = "";

            fundMems.forEach(member => {
                // null 값이 아닌 경우에만 row 추가
                if (member.memberName || member.memberType || member.committedUnitPrice || member.contact || member.address || member.businessRegNo || member.residentRegNo) {
                    const formattedPrice = member.committedUnitPrice ? Number(member.committedUnitPrice).toLocaleString() : ""; // 천단위 콤마 추가

                    const row = `<tr>
                <td>${member.memberName || ""}</td>
                <td>${member.memberType || ""}</td>
                <td class="text-end">${formattedPrice}</td>
                <td>${member.contact || ""}</td>
                <td colspan="2">${member.address || ""}</td>
                <td>${member.regNo || ""}</td>
            </tr>`;
                    tableBody.innerHTML += row;
                }
            });
        }

        function updateFundAchievementInfo(fundAchievement) {
            if (!fundAchievement) return;

            // 🔹 의무 투자
            const mandatoryPurpose = document.getElementById("mandatoryPurpose");
            if (mandatoryPurpose) mandatoryPurpose.value = fundAchievement.mandatoryPurpose || "";

            const mandatoryCriteria = document.getElementById("mandatoryCriteria");
            if (mandatoryCriteria) mandatoryCriteria.value = fundAchievement.mandatoryCriteria || "";

            const mandatoryCriteriaRatio = document.getElementById("mandatoryCriteriaRatio");
            if (mandatoryCriteriaRatio) mandatoryCriteriaRatio.value = fundAchievement.mandatoryCriteriaRatio ?? "";

            // 🔹 주목적 투자 1
            const mainInvest1Purpose = document.getElementById("mainInvest1Purpose");
            if (mainInvest1Purpose) mainInvest1Purpose.value = fundAchievement.mainInvest1Purpose || "";

            const mainInvest1Criteria = document.getElementById("mainInvest1Criteria");
            if (mainInvest1Criteria) mainInvest1Criteria.value = fundAchievement.mainInvest1Criteria || "";

            const mainInvest1CriteriaRatio = document.getElementById("mainInvest1CriteriaRatio");
            if (mainInvest1CriteriaRatio) mainInvest1CriteriaRatio.value = fundAchievement.mainInvest1CriteriaRatio ?? "";

            // 🔹 주목적 투자 2
            const mainInvest2Purpose = document.getElementById("mainInvest2Purpose");
            if (mainInvest2Purpose) mainInvest2Purpose.value = fundAchievement.mainInvest2Purpose || "";

            const mainInvest2Criteria = document.getElementById("mainInvest2Criteria");
            if (mainInvest2Criteria) mainInvest2Criteria.value = fundAchievement.mainInvest2Criteria || "";

            const mainInvest2CriteriaRatio = document.getElementById("mainInvest2CriteriaRatio");
            if (mainInvest2CriteriaRatio) mainInvest2CriteriaRatio.value = fundAchievement.mainInvest2CriteriaRatio ?? "";

            // 🔹 주목적 투자 3
            const mainInvest3Purpose = document.getElementById("mainInvest3Purpose");
            if (mainInvest3Purpose) mainInvest3Purpose.value = fundAchievement.mainInvest3Purpose || "";

            const mainInvest3Criteria = document.getElementById("mainInvest3Criteria");
            if (mainInvest3Criteria) mainInvest3Criteria.value = fundAchievement.mainInvest3Criteria || "";

            const mainInvest3CriteriaRatio = document.getElementById("mainInvest3CriteriaRatio");
            if (mainInvest3CriteriaRatio) mainInvest3CriteriaRatio.value = fundAchievement.mainInvest3CriteriaRatio ?? "";

            // 🔹 특수목적 투자 1
            const specialInvest1Purpose = document.getElementById("specialInvest1Purpose");
            if (specialInvest1Purpose) specialInvest1Purpose.value = fundAchievement.specialInvest1Purpose || "";

            const specialInvest1Criteria = document.getElementById("specialInvest1Criteria");
            if (specialInvest1Criteria) specialInvest1Criteria.value = fundAchievement.specialInvest1Criteria || "";

            const specialInvest1CriteriaRatio = document.getElementById("specialInvest1CriteriaRatio");
            if (specialInvest1CriteriaRatio) specialInvest1CriteriaRatio.value = fundAchievement.specialInvest1CriteriaRatio ?? "";

            // 🔹 특수목적 투자 2
            const specialInvest2Purpose = document.getElementById("specialInvest2Purpose");
            if (specialInvest2Purpose) specialInvest2Purpose.value = fundAchievement.specialInvest2Purpose || "";

            const specialInvest2Criteria = document.getElementById("specialInvest2Criteria");
            if (specialInvest2Criteria) specialInvest2Criteria.value = fundAchievement.specialInvest2Criteria || "";

            const specialInvest2CriteriaRatio = document.getElementById("specialInvest2CriteriaRatio");
            if (specialInvest2CriteriaRatio) specialInvest2CriteriaRatio.value = fundAchievement.specialInvest2CriteriaRatio ?? "";

            // 🔹 특수목적 투자 3
            const specialInvest3Purpose = document.getElementById("specialInvest3Purpose");
            if (specialInvest3Purpose) specialInvest3Purpose.value = fundAchievement.specialInvest3Purpose || "";

            const specialInvest3Criteria = document.getElementById("specialInvest3Criteria");
            if (specialInvest3Criteria) specialInvest3Criteria.value = fundAchievement.specialInvest3Criteria || "";

            const specialInvest3CriteriaRatio = document.getElementById("specialInvest3CriteriaRatio");
            if (specialInvest3CriteriaRatio) specialInvest3CriteriaRatio.value = fundAchievement.specialInvest3CriteriaRatio ?? "";

            // 🔹 투자 조건 줄 숨김 처리
            hideRowIfEmpty("mandatoryPurpose", "mandatoryCriteria", "mandatoryCriteriaRatio", "mandatoryRow");
            hideRowIfEmpty("mainInvest1Purpose", "mainInvest1Criteria", "mainInvest1CriteriaRatio", "mainInvest1Row");
            hideRowIfEmpty("mainInvest2Purpose", "mainInvest2Criteria", "mainInvest2CriteriaRatio", "mainInvest2Row");
            hideRowIfEmpty("mainInvest3Purpose", "mainInvest3Criteria", "mainInvest3CriteriaRatio", "mainInvest3Row");
            hideRowIfEmpty("specialInvest1Purpose", "specialInvest1Criteria", "specialInvest1CriteriaRatio", "specialInvest1Row");
            hideRowIfEmpty("specialInvest2Purpose", "specialInvest2Criteria", "specialInvest2CriteriaRatio", "specialInvest2Row");
            hideRowIfEmpty("specialInvest3Purpose", "specialInvest3Criteria", "specialInvest3CriteriaRatio", "specialInvest3Row");

        }
        function hideRowIfEmpty(purposeId, criteriaId, ratioId, rowSelector) {
            const purpose = document.getElementById(purposeId)?.value?.trim();
            const criteria = document.getElementById(criteriaId)?.value?.trim();
            const ratio = document.getElementById(ratioId)?.value?.trim();

            const row = document.getElementById(rowSelector);
            if (row) {
                const isEmpty = (!purpose || purpose === "") &&
                    (!criteria || criteria === "") &&
                    (!ratio || isNaN(parseFloat(ratio)));
                row.style.display = isEmpty ? "none" : "";
            }
        }

        function formatNumber(value) {
            if (!value) return "";
            return Number(value).toLocaleString(); // 천 단위 콤마 추가
        }

        document.addEventListener("DOMContentLoaded", function () {
            let fundId = document.getElementById("fundIdValue").value;
            if (fundId) {
                fetchFundInfo(fundId);
            }
        });

    </script>


    <script defer>
        document.addEventListener("DOMContentLoaded", function () {
            // ✅ fundId 값을 hidden input에서 가져오기
            let fundIdInput = document.getElementById("fundIdValue");
            let fundId = fundIdInput ? fundIdInput.value : null;

            console.log("✅ fundId:", fundId);

            if (fundId) {
                window.fundId = fundId; // ✅ 전역 변수에 저장
                fetchFundInfo(fundId); // ✅ 회사 정보 불러오기
            } else {
                console.warn("⚠️ fundId를 가져올 수 없습니다.");
            }
            // 입력 팝업 열기 함수
            // 팝업 열기 함수
            window.openPopup = function (type) {
                if (!window.fundId) {
                    alert("먼저 조합 정보를 조회한 후 입력하세요.");
                    return;
                }
                let url = `/fundAdd/${type}/${window.fundId}`;


                let width = 800;
                let height = 600;

                if (type === "audit") {
                    height = 300;
                } else if (type === "staff") {
                    height = 340;
                } else if (type === "fundFinancial") {
                    height = 750;
                } else if (type === "member") {
                    width = 1350;
                    height = 800;
                }

                window.open(url, "popupWindow", `width=${width},height=${height},scrollbars=yes`);

            };
            // 🔥 조회 팝업 열기 함수
            window.openViewPopup = function (type) {
                if (!window.fundId) {
                    alert("먼저 기업 정보를 조회한 후 확인하세요.");
                    return;
                }
                let url = `/fundShow/${type}/${window.fundId}`;
                let width = 800;
                let height = 600;
                // companyId에 따른 팝업 크기 조건 설정
                if (type === "auditsByFund") {
                    width = 600;
                    height = 400;
                } else if (type === "staffsByFund") {
                    height = 500;
                } else if (type === "financialsByFund") {
                    width = 1400;
                    height = 500;
                } else if (type === "dueDiligenceByFund") {
                    width = 900;
                    height = 500;
                } else if (type === "membersByFund") {
                    // width = 1350;
                    height = 800;
                } else if (type === "IASByfund") {
                    width = 1350;
                    height = 700;
                } else if (type === "achievementByfund") {
                    height = 770;
                } else if (type === "dueDiligenceByFund") {
                    height = 500;
                } else if (type === "empChangeByFund") {
                    height = 500;
                }
                window.open(url, "popupWindow", `width=${width},height=${height},scrollbars=yes`);
            };
        });
    </script>

</head>
<body>

<div th:replace="fragments/navbar :: navbar"></div>
<div th:replace="fragments/searchModal :: searchModal"></div>


<div class="wrapper">

    <input type="hidden" id="fundIdValue" th:value="${fundId}" />

    <!-- 📌 좌측 사이드바 -->
    <nav class="sidebar">
        <a href="#" onclick="openPopup('audit')">🧑🏻‍💼 회계감사인 관리</a>
        <a href="#" onclick="openViewPopup('auditsByFund')">🧑🏻‍💼 회계감사인 이력조회</a>
        <a href="#" onclick="openPopup('staff')">💼 운용인력 관리</a>
        <a href="#" onclick="openViewPopup('staffsByFund')">💼 운용인력 이력조회</a>
        <a href="#" onclick="openPopup('fundFinancial')">🗂️ 재무제표 관리</a>
        <a href="#" onclick="openViewPopup('financialsByFund')">🗂️ 재무제표 이력조회</a>
        <a href="#" onclick="openPopup('member')">👤 조합원명부 관리</a>
        <a href="#" onclick="openViewPopup('membersByFund')">👤 조합원명부 조회</a>
        <a href="#" onclick="openViewPopup('IASByfund')">💰 투자자산총괄표 조회</a>
        <a href="#" onclick="openViewPopup('achievementByfund')">🎖 투자율달성여부 조회</a>
        <!--        <a href="#" onclick="openViewPopup('#')">🪪 투자조합평가결과 조회</a>-->
        <a href="#" onclick="openViewPopup('dueDiligenceByFund')">🔍 투자기업실사 조회</a>
        <a href="#" onclick="openViewPopup('empChangeByFund')">👥 고용인력 이력조회</a>
    </nav>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let fundId = document.getElementById("fundIdValue").value;
            console.log("✅ fundId:", fundId);
            if (fundId) {
                fetchFundInfo(fundId);
            }
        });
    </script>
    <!-- 📌 메인 콘텐츠 영역 -->
    <div class="content">
        <h2>조합 정보 조회</h2>

        <form id="fundUpdateForm">
            <!-- 1. 회사 기본 정보 -->
            <table class="table table-bordered text-center">
                <thead>
                <tr><th colspan="7">투자조합 고유정보</th></tr>
                </thead>
                <tbody>
                <tr>
                    <th>조합 고유번호</th>
                    <td colspan="2"><input type="text" class="form-control" name="fundId" id="fundId"></td>
                    <th>청산여부</th>
                    <td>
                        <select class="form-control" name="liquidationStatus" id="liquidationStatus">
                            <option value="">선택하세요</option>
                            <option value="Y">Y</option>
                            <option value="N">N</option>
                        </select>
                    </td>
                    <th>청산일자</th>
                    <td><input type="date" class="form-control" name="liquidationDate" id="liquidationDate"></td>
                </tr>
                <tr>
                    <th>조합명</th>
                    <td colspan="2"><input type="text" class="form-control" name="fundName" id="fundName"></td>
                    <th>세부조합명</th>
                    <td colspan="3"><input type="text" class="form-control" name="fundNameDetail" id="fundNameDetail"></td>
                    <!--                    <th>결성총액일</th>-->
                    <!--                    <td colspan="2"><input type="date" class="form-control" name="establishmentDate" id="establishmentDate"></td>-->
                </tr>
                <tr>
                    <th>존속기간(년)</th>
                    <td colspan="2"><input type="number" class="form-control" name="duration" id="duration"></td>
                    <th>존속기간 시작일</th>
                    <td><input type="date" class="form-control" name="durationStartDate" id="durationStartDate"></td>
                    <th>존속기간 종료일</th>
                    <td><input type="date" class="form-control" name="durationEndDate" id="durationEndDate"></td>
                </tr>
                <tr>
                    <th>투자기간(년)</th>
                    <td colspan="2"><input type="number" class="form-control" name="investmentDuration" id="investmentDuration"></td>
                    <th>투자기간 시작일</th>
                    <td><input type="date" class="form-control" name="investmentStartDate" id="investmentStartDate"></td>
                    <th>투자기간 종료일</th>
                    <td><input type="date" class="form-control" name="investmentEndDate" id="investmentEndDate"></td>
                </tr>
                <tr>
                    <th>약정 총액</th>
                    <td colspan="2"><input type="text" class="form-control number-format" name="committedTotalPrice" id="committedTotalPrice"></td>
                    <th>1좌당 금액</th>
                    <td colspan="3"><input type="text" class="form-control number-format" name="unitPrice" id="unitPrice"></td>
                </tr>
                <tr>
                    <th>투자기구 유형</th>
                    <td colspan="2">
                        <select class="form-control" name="fundOrganizationType" id="fundOrganizationType">
                            <option value="">선택하세요</option>
                            <option value="개인투자조합">개인투자조합</option>
                            <option value="벤처투자조합">벤처투자조합</option>
                        </select>
                    </td>
                    <th>납입방법</th>
                    <td colspan="3">
                        <select class="form-control" name="paymentType" id="paymentType">
                            <option value="">선택하세요</option>
                            <option value="수시납">수시납</option>
                            <option value="일시납">일시납</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>대표펀드매니저</th>
                    <td colspan="2"><input type="text" class="form-control" name="leadFundManager" id="leadFundManager"></td>
                    <th>핵심운용인력</th>
                    <td colspan="3"><input type="text" class="form-control" name="coreIvtManager" id="coreIvtManager"></td>
                </tr>
                <tr>
                    <th>회계감사인명</th>
                    <td colspan="2"><input type="text" class="form-control" id="auditorName" readonly></td>
                    <th>회계감사인 변경일자</th>
                    <td colspan="3"><input type="date" class="form-control" id="changeDate" readonly></td>
                </tr>
                <tr>
                    <th>수탁회사(은행)</th>
                    <td colspan="2"><input type="text" class="form-control" name="trusteeCorporation" id="trusteeCorporation"></td>
                    <th>사무수탁법인</th>
                    <td colspan="3"><input type="text" class="form-control" name="administrationCorporation" id="administrationCorporation"></td>
                </tr>
                </tbody>

                <thead>
                <tr><th colspan="7">투자조합 보수조건</th></tr>
                </thead>
                <tbody>
                <tr>
                    <th>기준수익률(%)</th>
                    <td colspan="2"><input type="number" step="0.01" class="form-control" name="targetReturnRate" id="targetReturnRate"></td>
                    <th>성과보수율(%)</th>
                    <td colspan="3"><input type="number" step="0.01" class="form-control" name="performanceFeeRate" id="performanceFeeRate"></td>
                </tr>
                <tr>
                    <th>투자기간 관리보수</th>
                    <td colspan="6"><input type="text" class="form-control" name="managementFeeInvestmentPeriod" id="managementFeeInvestmentPeriod"></td>
                </tr>
                <tr>
                    <th>운영기간 관리보수</th>
                    <td colspan="6"><input type="text" class="form-control" name="managementFeeManagementPeriod" id="managementFeeManagementPeriod"></td>
                </tr>
                <tr>
                    <th>인센티브 조건</th>
                    <td colspan="6"><input type="text" class="form-control" name="incentiveCondition" id="incentiveCondition"></td>
                </tr>
                <!--                <tr>-->
                <!--                    <th>우선손실충당 GP</th>-->
                <!--                    <td colspan="7"><input type="text" class="form-control" name="priorLossGP" id="priorLossGP"></td>-->
                <!--                </tr>-->
                <!--                <tr>-->
                <!--                    <th>우선손실충당 LP</th>-->
                <!--                    <td colspan="7"><input type="text" class="form-control" name="priorLossLP" id="priorLossLP"></td>-->
                <!--                </tr>-->


                <tr><th colspan="7">투자조합 투자조건</th></tr>
                </tbody>
                <!-- 🔥 의무 투자 -->
                <tr id="mandatoryRow" th:if="${mandatoryPurpose != '' or mandatoryCriteria != '' or mandatoryCriteriaRatio != null}">
                    <th>의무투자 목적</th>
                    <td colspan="2">
                        <select class="form-control" id="mandatoryPurpose" name="mandatoryPurpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                        <th>기준대상</th>
                        <td>
                            <select class="form-control" id="mandatoryCriteria" name="mandatoryCriteria">
                                <option value="">선택하세요</option>
                                <option value="투자 잔액">투자 잔액</option>
                                <option value="출자약정액">출자약정액</option>
                                <option value="기타">기타</option>
                            </select>
                        </td>
                        <th>기준대상 비율(%)</th>
                        <td><input type="number" step="0.01" class="form-control" id="mandatoryCriteriaRatio" name="mandatoryCriteriaRatio"></td>
                    <!--                    <th>금액</th>-->
                    <!--                    <td colspan="3"><input type="text" class="form-control number-format" id="mandatoryTotal" name="mandatoryTotal"></td>-->
                </tr>

                <!-- 🔥 주목적 투자 1 -->
                <tr id="mainInvest1Row" th:if="${mainInvest1Purpose != '' or mainInvest1Criteria != '' or mainInvest1CriteriaRatio != null}">
                    <th>주목적투자 1</th>
                    <td colspan="2">
                        <select class="form-control" id="mainInvest1Purpose" name="mainInvest1Purpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                    <th>기준대상</th>
                    <td>
                        <select class="form-control" id="mainInvest1Criteria" name="mainInvest1Criteria">
                            <option value="">선택하세요</option>
                            <option value="투자 잔액">투자 잔액</option>
                            <option value="출자약정액">출자약정액</option>
                        </select>
                    </td>
                    <th>기준대상 비율(%)</th>
                    <td><input type="number" step="0.01" class="form-control" id="mainInvest1CriteriaRatio" name="mainInvest1CriteriaRatio"></td>
                    <!--                    <th>금액</th>-->
                    <!--                    <td><input type="text" class="form-control number-format" id="mainInvest1Total" name="mainInvest1Total"></td>-->
                </tr>


                <!-- 🔥 주목적 투자 2 -->
                <tr id="mainInvest2Row" th:if="${mainInvest2Purpose != '' or mainInvest2Criteria != '' or mainInvest2CriteriaRatio != null}">
                    <th>주목적투자 2</th>
                    <td colspan="2">
                        <select class="form-control" id="mainInvest2Purpose" name="mainInvest2Purpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                    <th>기준대상</th>
                    <td>
                        <select class="form-control" id="mainInvest2Criteria" name="mainInvest2Criteria">
                            <option value="">선택하세요</option>
                            <option value="투자 잔액">투자 잔액</option>
                            <option value="출자약정액">출자약정액</option>
                        </select>
                    </td>
                    <th>기준대상 비율(%)</th>
                    <td><input type="number" step="0.01" class="form-control" id="mainInvest2CriteriaRatio" name="mainInvest2CriteriaRatio"></td>
                    <!--                    <th>금액</th>-->
                    <!--                    <td><input type="text" class="form-control number-format" id="mainInvest2Total" name="mainInvest2Total"></td>-->
                </tr>

                <!-- 🔥 주목적 투자 3 -->
                <tr id="mainInvest3Row" th:if="${mainInvest3Purpose != '' or mainInvest3Criteria != '' or mainInvest3CriteriaRatio != null}">
                    <th>주목적투자 3</th>
                    <td colspan="2">
                        <select class="form-control" id="mainInvest3Purpose" name="mainInvest3Purpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                    <th>기준대상</th>
                    <td>
                        <select class="form-control" id="mainInvest3Criteria" name="mainInvest3Criteria">
                            <option value="">선택하세요</option>
                            <option value="투자 잔액">투자 잔액</option>
                            <option value="출자약정액">출자약정액</option>
                        </select>
                    </td>
                    <th>기준대상 비율(%)</th>
                    <td><input type="number" step="0.01" class="form-control" id="mainInvest3CriteriaRatio" name="mainInvest3CriteriaRatio"></td>
                    <!--                    <th>금액</th>-->
                    <!--                    <td><input type="text" class="form-control number-format" id="mainInvest3Total" name="mainInvest3Total"></td>-->
                </tr>


                <!-- 🔥 특수목적 투자 1 -->
                <tr id="specialInvest1Row" th:if="${specialInvest1Purpose != '' or specialInvest1Criteria != '' or specialInvest1CriteriaRatio != null}">
                    <th>특수목적투자 1</th>
                    <td colspan="2">
                        <select class="form-control" id="specialInvest1Purpose" name="specialInvest1Purpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                    <th>기준대상</th>
                    <td>
                        <select class="form-control" id="specialInvest1Criteria" name="specialInvest1Criteria">
                            <option value="">선택하세요</option>
                            <option value="투자 잔액">투자 잔액</option>
                            <option value="출자약정액">출자약정액</option>
                        </select>
                    </td>
                    <th> 기준대상 비율(%)</th>
                    <td><input type="number" step="0.01" class="form-control" id="specialInvest1CriteriaRatio" name="specialInvest1CriteriaRatio"></td>
                    <!--                    <th> 금액</th>-->
                    <!--                    <td><input type="text" class="form-control number-format" id="specialInvest1Total" name="specialInvest1Total"></td>-->
                </tr>

                    <!-- 🔥 특수목적 투자 2 -->
                <tr id="specialInvest2Row" th:if="${specialInvest2Purpose != '' or specialInvest2Criteria != '' or specialInvest2CriteriaRatio != null}">
                    <th>특수목적투자 2</th>
                    <td colspan="2">
                        <select class="form-control" id="specialInvest2Purpose" name="specialInvest2Purpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                    <th>기준대상</th>
                    <td>
                        <select class="form-control" id="specialInvest2Criteria" name="specialInvest2Criteria">
                            <option value="">선택하세요</option>
                            <option value="투자 잔액">투자 잔액</option>
                            <option value="출자약정액">출자약정액</option>
                        </select>
                    </td>
                    <th>기준대상 비율(%)</th>
                    <td><input type="number" step="0.01" class="form-control" id="specialInvest2CriteriaRatio" name="specialInvest2CriteriaRatio"></td>
                    <!--                    <th> 금액</th>-->
                    <!--                    <td><input type="text" class="form-control number-format" id="specialInvest2Total" name="specialInvest2Total"></td>-->
                </tr>

                <!-- 🔥 특수목적 투자 3 -->
                <tr id="specialInvest3Row" th:if="${specialInvest3Purpose != '' or specialInvest3Criteria != '' or specialInvest3CriteriaRatio != null}">
                    <th>특수목적투자 3</th>
                    <td colspan="2">
                        <select class="form-control" id="specialInvest3Purpose" name="specialInvest3Purpose">
                            <option value="">선택하세요</option>
                            <option value="초기창업">초기창업</option>
                            <option value="상장되지 않은 창업자 또는 벤처기업">상장되지 않은 창업자 또는 벤처기업</option>
                            <option value="출자약정액 80%투자">출자약정액 80% 투자</option>
                            <option value="대학창업">대학창업</option>
                            <option value="학생창업">학생창업</option>
                            <option value="지방기업">지방기업</option>
                            <option value="공공기술사업화 중소,벤처기업">공공기술사업화 중소,벤처기업</option>
                            <option value="고려대 창업기업">고려대 창업기업</option>
                            <option value="공공연구기관 기술활용 사업화기업">공공연구기관 기술활용 사업화기업</option>
                        </select>
                    </td>
                    <th>기준대상</th>
                    <td>
                        <select class="form-control" id="specialInvest3Criteria" name="specialInvest3Criteria">
                            <option value="">선택하세요</option>
                            <option value="투자 잔액">투자 잔액</option>
                            <option value="출자약정액">출자약정액</option>
                        </select>
                    </td>
                    <th>기준대상 비율(%)</th>
                    <td><input type="number" step="0.01" class="form-control" id="specialInvest3CriteriaRatio" name="specialInvest3CriteriaRatio"></td>
                    <!--                    <th> 금액</th>-->
                    <!--                    <td><input type="text" class="form-control number-format" id="specialInvest2Total" name="specialInvest2Total"></td>-->
                </tr>

                <!-- 투자조합원 명부 -->
                <thead>
                <tr><th colspan="7">투자조합 조합원 명부</th></tr>
                <tr>
                    <th>조합원</th>
                    <th>조합원유형</th>
                    <th>출자약정액</th>
                    <th>연락처</th>
                    <th colspan="2">주소</th>
                    <th>사업자・주민등록번호</th>
                    <!--                <th>주민등록번호</th>-->
                </tr>
                </thead>
                <tbody id="fundMembersTable"></tbody>
            </table>

            <!-- 저장 버튼 -->
            <div class="button-container text-end">
                <button type="submit" class="btn btn-primary">저장</button>
            </div>
        </form>

    </div>
</div>


</body>
</html>
