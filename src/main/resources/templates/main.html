<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KUH IDBS ë„¤ë¹„ê²Œì´ì…˜</title>

    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script defer th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/datatables-custom.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">


    <style>
        .navbar {
            background-color: #f8f9fa;
        }
        .logo-img {
            height: 40px;
        }
        .emp-img {
            height: 32px;
            width: 32px;
            border-radius: 50%;
        }
    </style>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const searchModal = new bootstrap.Modal(document.getElementById('searchModal'));
            const searchInput = document.getElementById('companyIdInput');
            const searchButton = document.getElementById('searchButton');

            function openSearchModal(target) {
                searchInput.value = ''; // ì…ë ¥ì°½ ì´ˆê¸°í™”
                searchButton.setAttribute("onclick", `goToPage('${target}')`);
                searchModal.show();
                setTimeout(() => searchInput.focus(), 200); // ëª¨ë‹¬ ì—´ë¦¬ë©´ ìë™ í¬ì»¤ìŠ¤
            }

            function goToPage(target) {
                const companyId = searchInput.value.trim();
                if (!companyId) {
                    alert("íšŒì‚¬ ê³ ìœ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
                    return;
                }
                window.location.href = `/${target}/${companyId}`;
            }

            // Enter í‚¤ ì…ë ¥ ì‹œ ê²€ìƒ‰ ì‹¤í–‰
            searchInput.addEventListener("keypress", function (event) {
                if (event.key === "Enter") {
                    searchButton.click();
                }
            });

            // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ (ì¤‘ë³µ ì´ë²¤íŠ¸ ë°©ì§€)
            searchButton.addEventListener("click", function () {
                goToPage(searchButton.getAttribute("onclick").match(/'([^']+)'/)[1]);
            });

            // ì „ì—­ í•¨ìˆ˜ë¡œ ì„¤ì • (Thymeleafì—ì„œ í˜¸ì¶œ ê°€ëŠ¥)
            window.openSearchModal = openSearchModal;
        });

    </script>

</head>
<body>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="navbar navbar-expand-lg navbar-light">
    <div class="container-fluid d-flex align-items-center">

        <!-- ì¢Œì¸¡ ë¡œê³  -->
        <div class="sidebar-logo">
            <img src="/images/KuLogo2.gif" alt="í”„ë¡œê·¸ë¨ ë¡œê³ " class="logo-img">
            <h1 class="logo-text">KUH IDBS</h1>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ (ì™¼ìª½ ì •ë ¬) -->
        <ul class="navbar-nav me-auto">
            <li class="nav-item">
                <a class="nav-link" href="#">ëŒ€ì‹œë³´ë“œ</a>
            </li>

            <!-- íˆ¬ìê´€ë¦¬ Dropdown -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#"
                   id="investDropdown" role="button"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    íˆ¬ìê´€ë¦¬
                </a>
                <ul class="dropdown-menu" aria-labelledby="investDropdown">
                    <li><a class="dropdown-item" href="#" onclick="openSearchModal('companyShow')">ê¸°ì—…ì •ë³´ì¡°íšŒ</a></li>
                    <li><a class="dropdown-item" href="/companyAdd">ì‹ ê·œê¸°ì—…ë“±ë¡</a></li>
                    <li><a class="dropdown-item" href="#" onclick="openSearchModal('companyManage')">íˆ¬ìí›„ì†ê´€ë¦¬</a></li>
                </ul>
            </li>

            <!-- ì¡°í•©ê´€ë¦¬ Dropdown -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#"
                   id="fundDropdown" role="button"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    ì¡°í•©ê´€ë¦¬
                </a>
                <ul class="dropdown-menu" aria-labelledby="fundDropdown">
                    <li><a class="dropdown-item" href="#">ì¡°í•©ì •ë³´ì¡°íšŒ</a></li>
                    <li><a class="dropdown-item" href="#">ì‹ ê·œì¡°í•©ë“±ë¡</a></li>
                </ul>
            </li>

            <!-- ì‹œìŠ¤í…œê´€ë¦¬ Dropdown -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#"
                   id="systemDropdown" role="button"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    ì‹œìŠ¤í…œê´€ë¦¬
                </a>
                <ul class="dropdown-menu" aria-labelledby="systemDropdown">
                    <li><a class="dropdown-item" href="#">ì‚¬ìš©ìê´€ë¦¬</a></li>
                    <li><a class="dropdown-item" href="#">ê¶Œí•œì„¤ì •</a></li>
                    <li><a class="dropdown-item" href="#">ë¡œê·¸ì¡°íšŒ</a></li>
                </ul>
            </li>
        </ul>

        <!-- ìš°ì¸¡ ì‚¬ìš©ì ì •ë³´ ë° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
        <div class="d-flex align-items-center">
            <div class="employee-info me-3">
                <span th:text="${empId} + ' ' + ${empName}"></span>
            </div>
            <img src="/images/EmpImg.png" alt="ì‚¬ì› ì‚¬ì§„" class="emp-img me-3">
            <button class="btn btn-outline-dark btn-sm" id="logoutButton" onclick="confirmLogout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>

    </div>
</nav>

<!-- ğŸ” ê²€ìƒ‰ ëª¨ë‹¬ -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body p-2 d-flex align-items-center">
                <input type="text" id="companyIdInput" class="form-control me-2" placeholder="ê³ ìœ ë²ˆí˜¸ ì…ë ¥" style="flex: 1; min-width: 120px;">
                <button type="button" class="btn btn-primary btn-sm" id="searchButton">ê²€ìƒ‰</button>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
        </div>
    </div>
</div>



</body>
</html>
