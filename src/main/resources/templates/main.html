<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ì‹œë³´ë“œ</title>

    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script defer th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/datatables-custom.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <script th:src="@{/js/common.js}"></script>

    <style>

    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const searchModal = new bootstrap.Modal(document.getElementById('searchModal'));
            const searchInput = document.getElementById('companyIdInput');
            const searchButton = document.getElementById('searchButton');

            function openSearchModal(target) {
                searchInput.value = ''; // ì…ë ¥ì°½ ì´ˆê¸°í™”
                searchButton.setAttribute("onclick", `goToPage('${target}')`);
                searchModal.show();
                setTimeout(() => searchInput.focus(), 200); // ëª¨ë‹¬ ì—´ë¦¬ë©´ ìë™ í¬ì»¤ìŠ¤
            }

            function goToPage(target) {
                const companyId = searchInput.value.trim();
                if (!companyId) {
                    alert("íšŒì‚¬ ê³ ìœ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
                    return;
                }
                window.location.href = `/${target}/${companyId}`;
            }

            // Enter í‚¤ ì…ë ¥ ì‹œ ê²€ìƒ‰ ì‹¤í–‰
            searchInput.addEventListener("keypress", function (event) {
                if (event.key === "Enter") {
                    searchButton.click();
                }
            });

            // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ (ì¤‘ë³µ ì´ë²¤íŠ¸ ë°©ì§€)
            searchButton.addEventListener("click", function () {
                goToPage(searchButton.getAttribute("onclick").match(/'([^']+)'/)[1]);
            });

            // ì „ì—­ í•¨ìˆ˜ë¡œ ì„¤ì • (Thymeleafì—ì„œ í˜¸ì¶œ ê°€ëŠ¥)
            window.openSearchModal = openSearchModal;
        });

    </script>

</head>
<body>

<div th:replace="fragments/navbar :: navbar"></div>



<div class="wrapper">
    <!-- ğŸ“Œ ì¢Œì¸¡ ì‚¬ì´ë“œë°” -->
    <nav class="sidebar">
        <a href="/main">ğŸ“Š ì‹¤ì‹œê°„ íˆ¬ìí˜„í™©</a>
    </nav>

    <!-- ğŸ“Œ ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="content">
        <h2>ğŸ“Œ í˜„ì¬ í˜ì´ì§€ ë‚´ìš© í‘œì‹œ</h2>
        <p> í˜ì´ì§€ë³„ ë‚´ìš©!</p>
    </div>

</div>

<!-- ğŸ” ê²€ìƒ‰ ëª¨ë‹¬ -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body p-2 d-flex align-items-center">
                <input type="text" id="companyIdInput" class="form-control me-2" placeholder="ê³ ìœ ë²ˆí˜¸ ì…ë ¥" style="flex: 1; min-width: 120px;">
                <button type="button" class="btn btn-primary btn-sm" id="searchButton">ê²€ìƒ‰</button>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
        </div>
    </div>
</div>

</body>
</html>
